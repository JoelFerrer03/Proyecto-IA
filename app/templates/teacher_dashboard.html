{% extends "base.html" %}

{% block title %}Dashboard Docente{% endblock %}

{% block content %}
<div class="dashboard">
    <h1>ğŸ‘¨â€ğŸ« Panel del Docente</h1>

    <div class="stats-grid">
        <div class="stat-card">
            <h3>ğŸ“‹ Mis Actividades</h3>
            <p class="stat-number">{{ overview.total_activities }}</p>
        </div>
        <div class="stat-card">
            <h3>ğŸ‘¥ Estudiantes Activos</h3>
            <p class="stat-number">{{ overview.total_students }}</p>
        </div>
        <div class="stat-card">
            <h3>ğŸ“Š Rendimiento Promedio</h3>
            <p class="stat-number">{{ overview.average_performance }}%</p>
        </div>
        <div class="stat-card alert-card">
            <h3>âš ï¸ Alertas</h3>
            <p class="stat-number">{{ overview.alerts }}</p>
        </div>
    </div>

    {% if struggling_students %}
    <div class="alerts-section">
        <h2>âš ï¸ Estudiantes que Necesitan Apoyo</h2>
        <div class="students-grid">
            {% for item in struggling_students %}
                <div class="student-alert-card">
                    <h4>{{ item.student.username }}</h4>
                    <p class="student-average">Promedio: {{ item.average }}%</p>
                    <span class="badge badge-danger">{{ item.status }}</span>
                </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <div class="actions-section">
        <a href="{{ url_for('create_activity') }}" class="btn btn-primary">â• Crear Nueva Actividad</a>
        <a href="{{ url_for('view_students') }}" class="btn btn-secondary">ğŸ‘¥ Ver Todos los Estudiantes</a>
    </div>

    <div class="activities-section">
        <h2>ğŸ“‹ Mis Actividades</h2>
        
        {% if activities %}
            <div class="activities-list">
                {% for activity in activities %}
                    <div class="activity-item">
                        <div class="activity-info-row">
                            <div>
                                <h3>{{ activity.title }}</h3>
                                <p>ğŸ“š {{ activity.subject }} | <span class="badge badge-{{ activity.difficulty }}">{{ activity.difficulty }}</span></p>
                                <p class="activity-meta">ğŸ“ {{ activity.questions|length }} preguntas | ğŸ“… {{ activity.created_at.strftime('%d/%m/%Y') }}</p>
                            </div>
                            <div class="activity-actions">
                                <a href="{{ url_for('activity_stats', activity_id=activity.id) }}" class="btn btn-info btn-small">ğŸ“Š Ver EstadÃ­sticas</a>
                                <a href="{{ url_for('add_questions', activity_id=activity.id) }}" class="btn btn-secondary btn-small">â• Agregar Preguntas</a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="no-data">AÃºn no has creado actividades. <a href="{{ url_for('create_activity') }}">Crea tu primera actividad</a></p>
        {% endif %}
    </div>
</div>
{% endblock %}